<svg host="65bd71144e" xmlns="http://www.w3.org/2000/svg" style="background: transparent; background-color: transparent;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1011px" height="1451px" viewBox="-0.5 -0.5 1011 1451" content="&lt;mxfile&gt;&lt;diagram id=&quot;1P3UjA30sUQXhBilglo7&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;">
    <defs/>
    <g>
        <g>
            <path d="M 40 30 L 83.63 30" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: rgb(0, 0, 0);"/>
            <path d="M 88.88 30 L 81.88 33.5 L 83.63 30 L 81.88 26.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: rgb(0, 0, 0); stroke: rgb(0, 0, 0);"/>
        </g>
        <g>
            <ellipse cx="25" cy="7.5" rx="7.5" ry="7.5" fill="#ffffff" stroke="#000000" pointer-events="all" style="fill: rgb(255, 255, 255); stroke: rgb(0, 0, 0);"/>
            <path d="M 25 15 L 25 40 M 25 20 L 10 20 M 25 20 L 40 20 M 25 40 L 10 60 M 25 40 L 40 60" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="stroke: rgb(0, 0, 0);"/>
        </g>
        <g>
            <g transform="translate(-0.5 -0.5)">
                <switch>
                    <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                        <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 67px; margin-left: 25px;">
                            <div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; ">
                                <div style="display: inline-block; font-size: 12px; font-family: &quot;Helvetica&quot;; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">
                                    USER I/P
                                </div>
                            </div>
                        </div>
                    </foreignObject>
                    <text x="25" y="79" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">
                        USER...
                    </text>
                </switch>
            </g>
        </g>
        <g>
            <path d="M 210 40 L 283.63 40" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: rgb(0, 0, 0);"/>
            <path d="M 288.88 40 L 281.88 43.5 L 283.63 40 L 281.88 36.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: rgb(0, 0, 0); stroke: rgb(0, 0, 0);"/>
        </g>
        <g>
            <path d="M 150 70 L 150 93.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: rgb(0, 0, 0);"/>
            <path d="M 150 98.88 L 146.5 91.88 L 150 93.63 L 153.5 91.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: rgb(0, 0, 0); stroke: rgb(0, 0, 0);"/>
        </g>
        <g>
            <rect x="90" y="10" width="120" height="60" fill="#ffffff" stroke="#000000" pointer-events="all" style="fill: rgb(255, 255, 255); stroke: rgb(0, 0, 0);"/>
        </g>
        <g>
            <g transform="translate(-0.5 -0.5)">
                <switch>
                    <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                        <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 40px; margin-left: 91px;">
                            <div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; ">
                                <div style="display: inline-block; font-size: 12px; font-family: &quot;Helvetica&quot;; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                    Embed Query
                                </div>
                            </div>
                        </div>
                    </foreignObject>
                    <text x="150" y="44" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">
                        Embed Query
                    </text>
                </switch>
            </g>
        </g>
        <g>
            <path d="M 410 40 L 483.63 40" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: rgb(0, 0, 0);"/>
            <path d="M 488.88 40 L 481.88 43.5 L 483.63 40 L 481.88 36.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: rgb(0, 0, 0); stroke: rgb(0, 0, 0);"/>
        </g>
        <g>
            <path d="M 350 70 L 350 93.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: rgb(0, 0, 0);"/>
            <path d="M 350 98.88 L 346.5 91.88 L 350 93.63 L 353.5 91.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: rgb(0, 0, 0); stroke: rgb(0, 0, 0);"/>
        </g>
        <g>
            <rect x="290" y="10" width="120" height="60" fill="#ffffff" stroke="#000000" pointer-events="all" style="fill: rgb(255, 255, 255); stroke: rgb(0, 0, 0);"/>
        </g>
        <g>
            <g transform="translate(-0.5 -0.5)">
                <switch>
                    <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                        <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 40px; margin-left: 291px;">
                            <div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; ">
                                <div style="display: inline-block; font-size: 12px; font-family: &quot;Helvetica&quot;; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                    Vector Retrieval
                                </div>
                            </div>
                        </div>
                    </foreignObject>
                    <text x="350" y="44" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">
                        Vector Retrieval
                    </text>
                </switch>
            </g>
        </g>
        <g>
            <path d="M 610 40 L 683.63 40" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: rgb(0, 0, 0);"/>
            <path d="M 688.88 40 L 681.88 43.5 L 683.63 40 L 681.88 36.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: rgb(0, 0, 0); stroke: rgb(0, 0, 0);"/>
        </g>
        <g>
            <rect x="490" y="10" width="120" height="60" fill="#ffffff" stroke="#000000" pointer-events="all" style="fill: rgb(255, 255, 255); stroke: rgb(0, 0, 0);"/>
        </g>
        <g>
            <g transform="translate(-0.5 -0.5)">
                <switch>
                    <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                        <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 40px; margin-left: 491px;">
                            <div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; ">
                                <div style="display: inline-block; font-size: 12px; font-family: &quot;Helvetica&quot;; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                    Construct Prompt With Context
                                </div>
                            </div>
                        </div>
                    </foreignObject>
                    <text x="550" y="44" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">
                        Construct Prompt Wit...
                    </text>
                </switch>
            </g>
        </g>
        <g>
            <path d="M 810 40 L 883.63 40" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: rgb(0, 0, 0);"/>
            <path d="M 888.88 40 L 881.88 43.5 L 883.63 40 L 881.88 36.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: rgb(0, 0, 0); stroke: rgb(0, 0, 0);"/>
        </g>
        <g>
            <path d="M 750 70 L 750 83.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: rgb(0, 0, 0);"/>
            <path d="M 750 88.88 L 746.5 81.88 L 750 83.63 L 753.5 81.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: rgb(0, 0, 0); stroke: rgb(0, 0, 0);"/>
        </g>
        <g>
            <rect x="690" y="10" width="120" height="60" fill="#ffffff" stroke="#000000" pointer-events="all" style="fill: rgb(255, 255, 255); stroke: rgb(0, 0, 0);"/>
        </g>
        <g>
            <g transform="translate(-0.5 -0.5)">
                <switch>
                    <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                        <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 40px; margin-left: 691px;">
                            <div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; ">
                                <div style="display: inline-block; font-size: 12px; font-family: &quot;Helvetica&quot;; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                    LLM response
                                    <span style="white-space: pre;">
                                    </span>
                                </div>
                            </div>
                        </div>
                    </foreignObject>
                    <text x="750" y="44" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">
                        LLM response
                    </text>
                </switch>
            </g>
        </g>
        <g>
            <rect x="890" y="10" width="120" height="60" fill="#ffffff" stroke="#000000" pointer-events="all" style="fill: rgb(255, 255, 255); stroke: rgb(0, 0, 0);"/>
        </g>
        <g>
            <g transform="translate(-0.5 -0.5)">
                <switch>
                    <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                        <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 40px; margin-left: 891px;">
                            <div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; ">
                                <div style="display: inline-block; font-size: 12px; font-family: &quot;Helvetica&quot;; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                    Final Answer
                                </div>
                            </div>
                        </div>
                    </foreignObject>
                    <text x="950" y="44" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">
                        Final Answer
                    </text>
                </switch>
            </g>
        </g>
        <g>
            <rect x="120" y="100" width="60" height="30" fill="none" stroke="#ff3333" pointer-events="all" style="stroke: rgb(255, 51, 51);"/>
        </g>
        <g>
            <g transform="translate(-0.5 -0.5)">
                <switch>
                    <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                        <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 115px; margin-left: 121px;">
                            <div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; ">
                                <div style="display: inline-block; font-size: 12px; font-family: &quot;Helvetica&quot;; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                    Llangchain
                                </div>
                            </div>
                        </div>
                    </foreignObject>
                    <text x="150" y="119" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">
                        Llangchain
                    </text>
                </switch>
            </g>
        </g>
        <g>
            <rect x="305" y="100" width="90" height="30" fill="none" stroke="#ff6666" pointer-events="all" style="stroke: rgb(255, 102, 102);"/>
        </g>
        <g>
            <g transform="translate(-0.5 -0.5)">
                <switch>
                    <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                        <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 88px; height: 1px; padding-top: 115px; margin-left: 306px;">
                            <div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; ">
                                <div style="display: inline-block; font-size: 12px; font-family: &quot;Helvetica&quot;; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                    Mosaic AI Vector search
                                </div>
                            </div>
                        </div>
                    </foreignObject>
                    <text x="350" y="119" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">
                        Mosaic AI Vecto...
                    </text>
                </switch>
            </g>
        </g>
        <g>
            <rect x="705" y="90" width="90" height="30" fill="none" stroke="#ff0000" pointer-events="all" style="stroke: rgb(255, 0, 0);"/>
        </g>
        <g>
            <g transform="translate(-0.5 -0.5)">
                <switch>
                    <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                        <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 88px; height: 1px; padding-top: 105px; margin-left: 706px;">
                            <div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; ">
                                <div style="display: inline-block; font-size: 12px; font-family: &quot;Helvetica&quot;; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                    ChatDatabricks Endpoint
                                </div>
                            </div>
                        </div>
                    </foreignObject>
                    <text x="750" y="109" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">
                        ChatDatabricks...
                    </text>
                </switch>
            </g>
        </g>
        <a xlink:href="&lt;div style=&quot;color: #3b3b3b;background-color: #f6f7f9;font-family: 'Menlo', 'Monaco', 'Consolas', 'Ubuntu Mono', 'Source Code Pro', monospace, Consolas, 'Courier New', monospace;font-weight: normal;font-size: 13px;line-height: 20px;white-space: pre;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #008000;&quot;&gt;# from langchain.embeddings import DatabricksEmbeddings&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #0a6fbf;&quot;&gt;from&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt; databricks_langchain &lt;/span&gt;&lt;span style=&quot;color: #0a6fbf;&quot;&gt;import&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt; DatabricksEmbeddings&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #0a6fbf;&quot;&gt;from&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt; databricks_langchain &lt;/span&gt;&lt;span style=&quot;color: #0a6fbf;&quot;&gt;import&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt; ChatDatabricks&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #0a6fbf;&quot;&gt;from&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt; langchain.prompts &lt;/span&gt;&lt;span style=&quot;color: #0a6fbf;&quot;&gt;import&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt; PromptTemplate&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #0a6fbf;&quot;&gt;from&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt; langchain.chains &lt;/span&gt;&lt;span style=&quot;color: #0a6fbf;&quot;&gt;import&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt; RetrievalQA&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #0a6fbf;&quot;&gt;from&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt; databricks_langchain.vectorstores &lt;/span&gt;&lt;span style=&quot;color: #0a6fbf;&quot;&gt;import&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt; DatabricksVectorSearch&lt;/span&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;&lt;span style=&quot;color: #008000;&quot;&gt;# 1.Create the Retriever (Mosaic AI Vector Search)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #0a6fbf;&quot;&gt;def&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #795e26;&quot;&gt;get_retriever&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;():&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;&amp;nbsp; &amp;nbsp; embeddings &lt;/span&gt;&lt;span style=&quot;color: #687687;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #795e26;&quot;&gt;DatabricksEmbeddings&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;endpoint&lt;/span&gt;&lt;span style=&quot;color: #687687;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #c72e0f;&quot;&gt;&quot;databricks-gte-large-en&quot;&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;&amp;nbsp; &amp;nbsp; vectorstore &lt;/span&gt;&lt;span style=&quot;color: #687687;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #795e26;&quot;&gt;DatabricksVectorSearch&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;(&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; vs_index_fullname,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;embedding&lt;/span&gt;&lt;span style=&quot;color: #687687;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;embeddings,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;text_column&lt;/span&gt;&lt;span style=&quot;color: #687687;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #c72e0f;&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;&amp;nbsp; &amp;nbsp; )&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #0a6fbf;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt; vectorstore.&lt;/span&gt;&lt;span style=&quot;color: #795e26;&quot;&gt;as_retriever&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;search_kwargs&lt;/span&gt;&lt;span style=&quot;color: #687687;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;{&lt;/span&gt;&lt;span style=&quot;color: #c72e0f;&quot;&gt;&quot;k&quot;&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;: &lt;/span&gt;&lt;span style=&quot;color: #098658;&quot;&gt;2&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;})&lt;/span&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;&lt;span style=&quot;color: #008000;&quot;&gt;# 2. Connect to the LLM (ChatDatabricks)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #0a6fbf;&quot;&gt;def&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #795e26;&quot;&gt;get_llm&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;():&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #0a6fbf;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #795e26;&quot;&gt;ChatDatabricks&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;(&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;endpoint&lt;/span&gt;&lt;span style=&quot;color: #687687;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #c72e0f;&quot;&gt;&quot;databricks-meta-llama-3-3-70b-instruct&quot;&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;max_tokens&lt;/span&gt;&lt;span style=&quot;color: #687687;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #098658;&quot;&gt;1024&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;&amp;nbsp; &amp;nbsp; )&lt;/span&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;&lt;span style=&quot;color: #008000;&quot;&gt;# 3. Design a Structured Prompt Template&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #0a6fbf;&quot;&gt;def&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #795e26;&quot;&gt;get_prompt_template&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;():&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;&amp;nbsp; &amp;nbsp; template &lt;/span&gt;&lt;span style=&quot;color: #687687;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c72e0f;&quot;&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span style=&quot;color: #a31515;&quot;&gt;You are an assistant for a policy support team.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #a31515;&quot;&gt;&amp;nbsp; &amp;nbsp; Use only the context provided below to answer the user question.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #a31515;&quot;&gt;&amp;nbsp; &amp;nbsp; Context:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #a31515;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #0a6fbf;&quot;&gt;{context}&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #a31515;&quot;&gt;&amp;nbsp; &amp;nbsp; Question:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #a31515;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #0a6fbf;&quot;&gt;{question}&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #a31515;&quot;&gt;&amp;nbsp; &amp;nbsp; Answer in clear, professional language. Avoid speculation.&lt;/span&gt;&lt;span style=&quot;color: #c72e0f;&quot;&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #0a6fbf;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #795e26;&quot;&gt;PromptTemplate&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;(&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;input_variables&lt;/span&gt;&lt;span style=&quot;color: #687687;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #c72e0f;&quot;&gt;&quot;context&quot;&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #c72e0f;&quot;&gt;&quot;question&quot;&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;],&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;template&lt;/span&gt;&lt;span style=&quot;color: #687687;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;template&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;&amp;nbsp; &amp;nbsp; )&lt;/span&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;&lt;span style=&quot;color: #008000;&quot;&gt;# 4. Assemble the RAG Chain&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #0a6fbf;&quot;&gt;def&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #795e26;&quot;&gt;create_rag_chain&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;():&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #0a6fbf;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt; RetrievalQA.&lt;/span&gt;&lt;span style=&quot;color: #795e26;&quot;&gt;from_chain_type&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;(&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;llm&lt;/span&gt;&lt;span style=&quot;color: #687687;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #795e26;&quot;&gt;get_llm&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;(),&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;retriever&lt;/span&gt;&lt;span style=&quot;color: #687687;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #795e26;&quot;&gt;get_retriever&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;(),&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;chain_type&lt;/span&gt;&lt;span style=&quot;color: #687687;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #c72e0f;&quot;&gt;&quot;stuff&quot;&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;chain_type_kwargs&lt;/span&gt;&lt;span style=&quot;color: #687687;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;{&lt;/span&gt;&lt;span style=&quot;color: #c72e0f;&quot;&gt;&quot;prompt&quot;&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;: &lt;/span&gt;&lt;span style=&quot;color: #795e26;&quot;&gt;get_prompt_template&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;()},&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;return_source_documents&lt;/span&gt;&lt;span style=&quot;color: #687687;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #0a6fbf;&quot;&gt;True&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;&amp;nbsp; &amp;nbsp; )&lt;/span&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;rag_chain &lt;/span&gt;&lt;span style=&quot;color: #687687;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #795e26;&quot;&gt;create_rag_chain&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;()&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;question &lt;/span&gt;&lt;span style=&quot;color: #687687;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c72e0f;&quot;&gt;&quot;What are the benefits for using LLM using langchain?&quot;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;result &lt;/span&gt;&lt;span style=&quot;color: #687687;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #795e26;&quot;&gt;rag_chain&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;(question)&lt;/span&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;&lt;span style=&quot;color: #795e26;&quot;&gt;print&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #c72e0f;&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;color: #ee0000;&quot;&gt;\n&lt;/span&gt;&lt;span style=&quot;color: #c72e0f;&quot;&gt;=== Final Answer ===&lt;/span&gt;&lt;span style=&quot;color: #ee0000;&quot;&gt;\n&lt;/span&gt;&lt;span style=&quot;color: #c72e0f;&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;, result[&lt;/span&gt;&lt;span style=&quot;color: #c72e0f;&quot;&gt;'result'&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;])&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #795e26;&quot;&gt;print&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #c72e0f;&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;color: #ee0000;&quot;&gt;\n&lt;/span&gt;&lt;span style=&quot;color: #c72e0f;&quot;&gt;=== Sources ===&quot;&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #0a6fbf;&quot;&gt;for&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt; doc &lt;/span&gt;&lt;span style=&quot;color: #0a6fbf;&quot;&gt;in&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt; result[&lt;/span&gt;&lt;span style=&quot;color: #c72e0f;&quot;&gt;'source_documents'&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;]:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #795e26;&quot;&gt;print&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #0a6fbf;&quot;&gt;f&lt;/span&gt;&lt;span style=&quot;color: #c72e0f;&quot;&gt;&quot;- &lt;/span&gt;&lt;span style=&quot;color: #0a6fbf;&quot;&gt;{&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;doc.metadata.&lt;/span&gt;&lt;span style=&quot;color: #795e26;&quot;&gt;get&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #c72e0f;&quot;&gt;'doc_title'&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;, doc.metadata.&lt;/span&gt;&lt;span style=&quot;color: #795e26;&quot;&gt;get&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #c72e0f;&quot;&gt;'pdf_name'&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #c72e0f;&quot;&gt;'Unknown'&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;))&lt;/span&gt;&lt;span style=&quot;color: #0a6fbf;&quot;&gt;}&lt;/span&gt;&lt;span style=&quot;color: #c72e0f;&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;color: #3b3b3b;&quot;&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;">
            <g>
                <rect x="130" y="150" width="790" height="1300" fill="none" stroke="none" pointer-events="all"/>
            </g>
            <g>
                <g transform="translate(-0.5 -0.5)">
                    <switch>
                        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                            <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 788px; height: 1px; padding-top: 157px; margin-left: 132px;">
                                <div style="box-sizing: border-box; font-size: 0; text-align: left; color: #000000; ">
                                    <div style="display: inline-block; font-size: 12px; font-family: &quot;Helvetica&quot;; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                        <div style="color: rgb(59, 59, 59); background-color: rgb(246, 247, 249); font-family: Menlo, Monaco, Consolas, &quot;Ubuntu Mono&quot;, &quot;Source Code Pro&quot;, monospace, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; line-height: 20px; white-space: pre;">
                                            <div style="font-weight: normal;">
                                                <span style="color: #008000;">
                                                    # from langchain.embeddings import DatabricksEmbeddings
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #0a6fbf;">
                                                    from
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    databricks_langchain
                                                </span>
                                                <span style="color: #0a6fbf;">
                                                    import
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    DatabricksEmbeddings
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #0a6fbf;">
                                                    from
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    databricks_langchain
                                                </span>
                                                <span style="color: #0a6fbf;">
                                                    import
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    ChatDatabricks
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #0a6fbf;">
                                                    from
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    langchain.prompts
                                                </span>
                                                <span style="color: #0a6fbf;">
                                                    import
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    PromptTemplate
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #0a6fbf;">
                                                    from
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    langchain.chains
                                                </span>
                                                <span style="color: #0a6fbf;">
                                                    import
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    RetrievalQA
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #0a6fbf;">
                                                    from
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    databricks_langchain.vectorstores
                                                </span>
                                                <span style="color: #0a6fbf;">
                                                    import
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    DatabricksVectorSearch
                                                </span>
                                            </div>
                                            <br/>
                                            <div style="">
                                                <span style="color: rgb(0, 128, 0);">
                                                    #
                                                    <b>
                                                        1.Create the Retriever (Mosaic AI Vector Search)
                                                    </b>
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #0a6fbf;">
                                                    def
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                </span>
                                                <span style="color: #795e26;">
                                                    get_retriever
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    ():
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #3b3b3b;">
                                                    embeddings
                                                </span>
                                                <span style="color: #687687;">
                                                    =
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                </span>
                                                <span style="color: #795e26;">
                                                    DatabricksEmbeddings
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    (
                                                </span>
                                                <span style="color: #001080;">
                                                    endpoint
                                                </span>
                                                <span style="color: #687687;">
                                                    =
                                                </span>
                                                <span style="color: #c72e0f;">
                                                    "databricks-gte-large-en"
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    )
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #3b3b3b;">
                                                    vectorstore
                                                </span>
                                                <span style="color: #687687;">
                                                    =
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                </span>
                                                <span style="color: #795e26;">
                                                    DatabricksVectorSearch
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    (
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #3b3b3b;">
                                                    vs_index_fullname,
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #3b3b3b;">
                                                </span>
                                                <span style="color: #001080;">
                                                    embedding
                                                </span>
                                                <span style="color: #687687;">
                                                    =
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    embeddings,
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #3b3b3b;">
                                                </span>
                                                <span style="color: #001080;">
                                                    text_column
                                                </span>
                                                <span style="color: #687687;">
                                                    =
                                                </span>
                                                <span style="color: #c72e0f;">
                                                    "content"
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #3b3b3b;">
                                                    )
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #3b3b3b;">
                                                </span>
                                                <span style="color: #0a6fbf;">
                                                    return
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    vectorstore.
                                                </span>
                                                <span style="color: #795e26;">
                                                    as_retriever
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    (
                                                </span>
                                                <span style="color: #001080;">
                                                    search_kwargs
                                                </span>
                                                <span style="color: #687687;">
                                                    =
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    {
                                                </span>
                                                <span style="color: #c72e0f;">
                                                    "k"
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    :
                                                </span>
                                                <span style="color: #098658;">
                                                    2
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    })
                                                </span>
                                            </div>
                                            <br/>
                                            <div style="">
                                                <span style="color: rgb(0, 128, 0);">
                                                    #
                                                    <b>
                                                        2. Connect to the LLM (ChatDatabricks)
                                                    </b>
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #0a6fbf;">
                                                    def
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                </span>
                                                <span style="color: #795e26;">
                                                    get_llm
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    ():
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #3b3b3b;">
                                                </span>
                                                <span style="color: #0a6fbf;">
                                                    return
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                </span>
                                                <span style="color: #795e26;">
                                                    ChatDatabricks
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    (
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #3b3b3b;">
                                                </span>
                                                <span style="color: #001080;">
                                                    endpoint
                                                </span>
                                                <span style="color: #687687;">
                                                    =
                                                </span>
                                                <span style="color: #c72e0f;">
                                                    "databricks-meta-llama-3-3-70b-instruct"
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    ,
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #3b3b3b;">
                                                </span>
                                                <span style="color: #001080;">
                                                    max_tokens
                                                </span>
                                                <span style="color: #687687;">
                                                    =
                                                </span>
                                                <span style="color: #098658;">
                                                    1024
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #3b3b3b;">
                                                    )
                                                </span>
                                            </div>
                                            <br/>
                                            <div style="">
                                                <span style="color: rgb(0, 128, 0);">
                                                    <b>
                                                        # 3. Design a Structured Prompt Template
                                                    </b>
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #0a6fbf;">
                                                    def
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                </span>
                                                <span style="color: #795e26;">
                                                    get_prompt_template
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    ():
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #3b3b3b;">
                                                    template
                                                </span>
                                                <span style="color: #687687;">
                                                    =
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                </span>
                                                <span style="color: #c72e0f;">
                                                    """
                                                </span>
                                                <span style="color: #a31515;">
                                                    You are an assistant for a policy support team.
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #a31515;">
                                                    Use only the context provided below to answer the user question.
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #a31515;">
                                                    Context:
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #a31515;">
                                                </span>
                                                <span style="color: #0a6fbf;">
                                                    {context}
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #a31515;">
                                                    Question:
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #a31515;">
                                                </span>
                                                <span style="color: #0a6fbf;">
                                                    {question}
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #a31515;">
                                                    Answer in clear, professional language. Avoid speculation.
                                                </span>
                                                <span style="color: #c72e0f;">
                                                    """
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #3b3b3b;">
                                                </span>
                                                <span style="color: #0a6fbf;">
                                                    return
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                </span>
                                                <span style="color: #795e26;">
                                                    PromptTemplate
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    (
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #3b3b3b;">
                                                </span>
                                                <span style="color: #001080;">
                                                    input_variables
                                                </span>
                                                <span style="color: #687687;">
                                                    =
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    [
                                                </span>
                                                <span style="color: #c72e0f;">
                                                    "context"
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    ,
                                                </span>
                                                <span style="color: #c72e0f;">
                                                    "question"
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    ],
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #3b3b3b;">
                                                </span>
                                                <span style="color: #001080;">
                                                    template
                                                </span>
                                                <span style="color: #687687;">
                                                    =
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    template
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #3b3b3b;">
                                                    )
                                                </span>
                                            </div>
                                            <br/>
                                            <div style="">
                                                <span style="color: rgb(0, 128, 0);">
                                                    <b>
                                                        # 4. Assemble the RAG Chain
                                                    </b>
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #0a6fbf;">
                                                    def
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                </span>
                                                <span style="color: #795e26;">
                                                    create_rag_chain
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    ():
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #3b3b3b;">
                                                </span>
                                                <span style="color: #0a6fbf;">
                                                    return
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    RetrievalQA.
                                                </span>
                                                <span style="color: #795e26;">
                                                    from_chain_type
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    (
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #3b3b3b;">
                                                </span>
                                                <span style="color: #001080;">
                                                    llm
                                                </span>
                                                <span style="color: #687687;">
                                                    =
                                                </span>
                                                <span style="color: #795e26;">
                                                    get_llm
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    (),
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #3b3b3b;">
                                                </span>
                                                <span style="color: #001080;">
                                                    retriever
                                                </span>
                                                <span style="color: #687687;">
                                                    =
                                                </span>
                                                <span style="color: #795e26;">
                                                    get_retriever
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    (),
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #3b3b3b;">
                                                </span>
                                                <span style="color: #001080;">
                                                    chain_type
                                                </span>
                                                <span style="color: #687687;">
                                                    =
                                                </span>
                                                <span style="color: #c72e0f;">
                                                    "stuff"
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    ,
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #3b3b3b;">
                                                </span>
                                                <span style="color: #001080;">
                                                    chain_type_kwargs
                                                </span>
                                                <span style="color: #687687;">
                                                    =
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    {
                                                </span>
                                                <span style="color: #c72e0f;">
                                                    "prompt"
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    :
                                                </span>
                                                <span style="color: #795e26;">
                                                    get_prompt_template
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    ()},
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #3b3b3b;">
                                                </span>
                                                <span style="color: #001080;">
                                                    return_source_documents
                                                </span>
                                                <span style="color: #687687;">
                                                    =
                                                </span>
                                                <span style="color: #0a6fbf;">
                                                    True
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #3b3b3b;">
                                                    )
                                                </span>
                                            </div>
                                            <br/>
                                            <div style="font-weight: normal;">
                                                <span style="color: #3b3b3b;">
                                                    rag_chain
                                                </span>
                                                <span style="color: #687687;">
                                                    =
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                </span>
                                                <span style="color: #795e26;">
                                                    create_rag_chain
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    ()
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #3b3b3b;">
                                                    question
                                                </span>
                                                <span style="color: #687687;">
                                                    =
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                </span>
                                                <span style="color: #c72e0f;">
                                                    "What are the benefits for using LLM using langchain?"
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #3b3b3b;">
                                                    result
                                                </span>
                                                <span style="color: #687687;">
                                                    =
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                </span>
                                                <span style="color: #795e26;">
                                                    rag_chain
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    (question)
                                                </span>
                                            </div>
                                            <br/>
                                            <div style="font-weight: normal;">
                                                <span style="color: #795e26;">
                                                    print
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    (
                                                </span>
                                                <span style="color: #c72e0f;">
                                                    "
                                                </span>
                                                <span style="color: #ee0000;">
                                                    \n
                                                </span>
                                                <span style="color: #c72e0f;">
                                                    === Final Answer ===
                                                </span>
                                                <span style="color: #ee0000;">
                                                    \n
                                                </span>
                                                <span style="color: #c72e0f;">
                                                    "
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    , result[
                                                </span>
                                                <span style="color: #c72e0f;">
                                                    'result'
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    ])
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #795e26;">
                                                    print
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    (
                                                </span>
                                                <span style="color: #c72e0f;">
                                                    "
                                                </span>
                                                <span style="color: #ee0000;">
                                                    \n
                                                </span>
                                                <span style="color: #c72e0f;">
                                                    === Sources ==="
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    )
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #0a6fbf;">
                                                    for
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    doc
                                                </span>
                                                <span style="color: #0a6fbf;">
                                                    in
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    result[
                                                </span>
                                                <span style="color: #c72e0f;">
                                                    'source_documents'
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    ]:
                                                </span>
                                            </div>
                                            <div style="font-weight: normal;">
                                                <span style="color: #3b3b3b;">
                                                </span>
                                                <span style="color: #795e26;">
                                                    print
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    (
                                                </span>
                                                <span style="color: #0a6fbf;">
                                                    f
                                                </span>
                                                <span style="color: #c72e0f;">
                                                    "-
                                                </span>
                                                <span style="color: #0a6fbf;">
                                                    {
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    doc.metadata.
                                                </span>
                                                <span style="color: #795e26;">
                                                    get
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    (
                                                </span>
                                                <span style="color: #c72e0f;">
                                                    'doc_title'
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    , doc.metadata.
                                                </span>
                                                <span style="color: #795e26;">
                                                    get
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    (
                                                </span>
                                                <span style="color: #c72e0f;">
                                                    'pdf_name'
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    ,
                                                </span>
                                                <span style="color: #c72e0f;">
                                                    'Unknown'
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    ))
                                                </span>
                                                <span style="color: #0a6fbf;">
                                                    }
                                                </span>
                                                <span style="color: #c72e0f;">
                                                    "
                                                </span>
                                                <span style="color: #3b3b3b;">
                                                    )
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </foreignObject>
                        <text x="132" y="169" fill="light-dark(#000000, #ffffff)" font-family="&quot;Helvetica&quot;" font-size="12px">
                            # from langchain.embeddings import DatabricksEmbeddings...
                        </text>
                    </switch>
                </g>
            </g>
        </a>
    </g>
    <switch>
        <g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/>
        <a transform="translate(0,-5)" xlink:href="https://www.drawio.com/doc/faq/svg-export-text-problems" target="_blank">
            <text text-anchor="middle" font-size="10px" x="50%" y="100%">
                Text is not SVG - cannot display
            </text>
        </a>
    </switch>
</svg>